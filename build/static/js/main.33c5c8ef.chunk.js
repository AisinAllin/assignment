(this["webpackJsonpcc-assignment"]=this["webpackJsonpcc-assignment"]||[]).push([[0],{220:function(e,t,n){},225:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},414:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(212),s=n.n(r),c=(n(220),n(28)),i=n(29),o=n(31),l=n(30),u=n(19),h=n(7),d=n(34),j=n(16),b=(n(225),n(1)),O=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?Object(b.jsx)(h.a,{to:"/"}):Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("form",{onSubmit:this.handleSubmit,className:"signin",children:[Object(b.jsx)("h5",{children:"Log in"}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("button",{className:"signinButton",children:"Login"}),Object(b.jsx)("div",{className:"warningMessage",children:t?Object(b.jsx)("p",{children:t}):null})]})]})})}}]),n}(a.Component),p=Object(j.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e(function(e){return function(t,n,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){t({type:"LOGIN_SUCCESS"})})).catch((function(e){t({type:"LOGIN_ERROR",err:e})}))}}(t))}}}))(O),f=(n(228),function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",firstName:"",lastName:""},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;return t.uid?Object(b.jsx)(h.a,{to:"/"}):Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("form",{className:"white",onSubmit:this.handleSubmit,children:[Object(b.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign Up"}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(b.jsx)("input",{type:"text",id:"firstName",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(b.jsx)("input",{type:"text",id:"lastName",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("button",{className:"signupButton",children:"Sign Up"}),Object(b.jsx)("div",{className:"warningMessage",children:n?Object(b.jsx)("p",{children:n}):null})]})]})})}}]),n}(a.Component)),m=Object(j.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,n,a){var r=a.getFirebase,s=a.getFirestore,c=r(),i=s();c.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return i.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))(f),g=(n(229),n(230),n(214)),x=n.n(g),N=function(e){var t=e.forum;return Object(b.jsx)("div",{className:"forum--card",children:Object(b.jsxs)("div",{className:"card-content",children:[Object(b.jsx)("span",{className:"card-title ",children:t.title}),Object(b.jsx)("p",{children:t.content}),Object(b.jsxs)("p",{className:"authorName",children:["posted by ",t.authorFirstName," ",t.authorLastName]}),Object(b.jsx)("p",{className:"postDate",children:x()(t.createdAt.toDate()).calendar()})]})})},v=function(e){var t=e.forum;return Object(b.jsx)("div",{className:"froumlist--container",children:t&&t.map((function(e){return Object(b.jsx)(N,{className:"fourmlist--content",forum:e},e.id)}))})},S=n(42),C=n(32),E=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.forum;return e.auth.uid?Object(b.jsx)("div",{className:"dashboard--container",children:Object(b.jsx)("div",{className:"dashboard--context",children:Object(b.jsx)("div",{className:"list",children:Object(b.jsx)(v,{forum:t})})})}):Object(b.jsx)(h.a,{to:"/signin"})}}]),n}(a.Component),w=Object(C.d)(Object(j.b)((function(e){return{forum:e.firestore.ordered.forum,auth:e.firebase.auth}})),Object(S.firestoreConnect)([{collection:"forum",orderBy:["createdAt","desc"],limit:10}]))(E),R=n(12),y=(n(381),function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={title:"",content:"",newPassword:""},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createForum(e.state),e.props.history.push("/")},e.changePassword=function(t){t.preventDefault(),console.log(e.props),e.props.changePassword(e.state),e.props.signOut(),e.props.history.push("/signin")},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;return t.uid?Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,children:[Object(b.jsx)("h5",{children:"Create a Forum"}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"title",children:"Forum Title"}),Object(b.jsx)("input",{type:"text",id:"title",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"content",children:"Forum Content"}),Object(b.jsx)("textarea",{id:"content",className:"textarea",onChange:this.handleChange})]}),Object(b.jsx)("div",{className:"input-field",children:Object(b.jsx)("button",{className:"createBotton",children:"Create"})})]}),Object(b.jsxs)("form",{className:"passwordChanger",onSubmit:this.changePassword,children:[Object(b.jsx)("h5",{children:"Change your password"}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("label",{htmlFor:"password",children:"New Password"}),Object(b.jsx)("input",{type:"password",id:"newPassword",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("button",{className:"signinButton",children:"change password"}),Object(b.jsx)("div",{className:"warningMessage",children:n?Object(b.jsx)("p",{children:n}):null})]})]})]}):Object(b.jsx)(h.a,{to:"/signin"})}}]),n}(a.Component)),F=Object(j.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{createForum:function(t){return e(function(e){return function(t,n,a){a.getFirebase;var r=(0,a.getFirestore)(),s=n().firebase.profile,c=n().firebase.auth.uid;console.log(s),console.log(c),r.collection("forum").add(Object(R.a)(Object(R.a)({},e),{},{authorFirstName:s.firstName,authorLastName:s.lastName,authorId:c,createdAt:new Date})).then((function(){t({type:"CREATE_FORUM_SUCCESS",forum:e})})).catch((function(e){t({type:"CREATE_FORUM_ERROR"},e)}))}}(t))},changePassword:function(t){return e((n=t,console.log(n.newPassword),function(e,t,a){var r=a.getFirebase;a.getFirestore,r().auth().currentUser.updatePassword(n.newPassword).then((function(){e({type:"PASSWORD_CHANGE_SUCCESS"})})).catch((function(t){e({type:"PASSWORD_CHANGE_ERROR",err:t})}))}));var n},signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))(y),U=(n(382),n(383),Object(j.b)((function(e){return{firstName:e.firebase.profile.firstName,lastName:e.firebase.profile.lastName}}),(function(e){return{signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){var t=e.lastName,n=e.firstName;return Object(b.jsxs)("ul",{className:"signIn",children:[Object(b.jsx)("li",{children:Object(b.jsxs)(u.c,{to:"/userpage",children:[n," ",t]})}),Object(b.jsx)("li",{children:Object(b.jsx)("button",{onClick:e.signOut,children:"Log Out"})})]})}))),_=(n(384),function(){return Object(b.jsxs)("ul",{className:"signIn",children:[Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{to:"/signup",children:"Sign up"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{to:"/signin",children:"Log in"})})]})}),A=Object(j.b)((function(e){return console.log(e),{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth.uid?Object(b.jsx)(U,{}):Object(b.jsx)(_,{});return Object(b.jsx)("nav",{className:"navbar",children:Object(b.jsxs)("div",{className:"navbar--container",children:[Object(b.jsx)(u.b,{to:"/",className:"navbar--title",children:"CC assignment\u2014\u2014\u2014\u2014S3762087"}),Object(b.jsx)("div",{className:"navbar--signSta te",children:t})]})})})),P=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(b.jsx)(u.a,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(A,{}),Object(b.jsxs)(h.d,{children:[Object(b.jsx)(h.b,{exact:!0,path:"/",component:w}),Object(b.jsx)(h.b,{exact:!0,path:"/signin",component:p}),Object(b.jsx)(h.b,{exact:!0,path:"/signup",component:m}),Object(b.jsx)(h.b,{exact:!0,path:"/userpage",component:F})]})]})})}}]),n}(a.Component),I={authError:null},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Object(R.a)(Object(R.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(R.a)(Object(R.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(R.a)(Object(R.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(R.a)(Object(R.a)({},e),{},{authError:t.err.message});case"PASSWORD_CHANGE_SUCCESS":return console.log("password change success"),Object(R.a)(Object(R.a)({},e),{},{authError:null});case"PASSWORD_CHANGE_ERROR":return console.log("password change error"),Object(R.a)(Object(R.a)({},e),{},{authError:"password change failed"});default:return e}},D={forum:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_FORUM_SUCCESS":return console.log("CREATE_FORUM_SUCCESS",t.forum),e;case"CREATE_FORUM_ERROR":return console.log("CREATE_FORUM_ERROR",t.err),e;default:return e}},T=n(65),k=Object(C.c)({auth:G,forum:L,firestore:T.firestoreReducer,firebase:S.firebaseReducer}),B=n(215),M=n(95);n(415),n(412);M.a.initializeApp({apiKey:"AIzaSyBv7dPC5--WJO2Nc2eR3Z7szDKiPoRe3T8",authDomain:"cc-test-b0866.firebaseapp.com",projectId:"cc-test-b0866",storageBucket:"cc-test-b0866.appspot.com",messagingSenderId:"910118460907",appId:"1:910118460907:web:d9b348dd54435cb2df4dae",measurementId:"G-3L4ZBXK1F2"}),M.a.firestore().settings({timestampsInSnapshots:!0});var W=M.a,H=Object(C.e)(k,Object(C.d)(Object(C.a)(B.a.withExtraArgument({getFirebase:S.getFirebase,getFirestore:T.getFirestore})),Object(T.reduxFirestore)(W),Object(S.reactReduxFirebase)(W,{userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0})));s.a.render(Object(b.jsx)(j.a,{store:H,children:Object(b.jsx)(P,{})}),document.getElementById("root"))}},[[414,1,2]]]);
//# sourceMappingURL=main.33c5c8ef.chunk.js.map